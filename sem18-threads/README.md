# Потоки
 
Зачастую нам бывает нужно что-нибудь параллельно посчитать. В этом случае нам удобно иметь общую память, а для локальных вычислений достаточно своего стека и регистров (и своей обработки сигналов). В таком случае можно говорить о потоках.

Чтобы использовать потоки, нужно при компиляции добавить опцию `-pthread`. 

## Запуск потоков

Запуск потоков осуществляется с помощью системного вызова `pthread_create`.

```
int pthread_create(
    // указатель на переменную-результат
    pthread_t *thread,

    // опционально: параметры нового потока,
    // например размер стека
    // может быть NULL
    const pthread_attr_t *attr,

    // функция, которая будет выполняться
    (void*)(*function)(void*),

    // аргумент, который передается в функцию
    void *arg
);
```

Дождаться завершения можно с помощью `pthread_join`.

```
int pthread_join(
    // поток, который нужно ждать
    pthread_t thread,

    // указатель на результат работы функции,
    // либо NULL, если он не интересен
    (void*) *retval
    );
```

## Атрибуты потока

Манипуляция аттрибутами потока производится путём создания структуры и сеттеров.

```
pthread_attr_t thread_attr; 
pthread_attr_init(&thread_attr);
pthread_attr_setstacksize(&thread_attr, MY_STACK_SIZE)
```

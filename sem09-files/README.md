# Файловый ввод-вывод

## Файловые дескрипторы

Файловый дескриптор это абстракция для ввода/вывода (это может быть файл, пайп или сокет). Это число, которое адресует файл в рамках одного процесса. Внутри ядра содержится структура содержит адрес файла и позицию курсора.
Стандартные файловые дескрипторы вам уже знакомы: 0 stdin, 1 stdout, 2 stderr.

## Open/Close

Системный вызов open преднозначен для создания файлового дескриптора из файла.

```
int open(const char *path, int flags, ... /* mode_t mode */);
// путь к файлу
// flags O_RDONLY, O_WRONLY, ..., O_CREAT
```

Основные параметры открытия файлов:
 * `O_RDONLY` - только для чтения;
 * `O_WRONLY` - только на запись;
 * `O_RDWR` - чтение и запись;
 * `O_APPEND` - запись в конец файла;
 * `O_TRUNC`- обнуление файла при открытии;
 * `O_CREAT` - создание файла, если не существует;
 * `O_EXCL` - создание файла только если он не существует.

В случае успеха возвращается неотрицательное число - дескриптор, в случае ошибки - значение `-1`.

Третий аргумент отвечает за права.

В случае создания файла, обязательным параметром является набор POSIX-аттрибутов доступа к файлу. Как правило, они кодируются в восьмиричной системе исчисления в виде `0ugo`, где `u` - права доступа для владельца файла, `g` - права доступа для всех пользователей группы файла, `o` - для остальных.

В восьмеричной записи значения от 0 до 7 соответствуют комбинации трёх бит:
```
00: ---
01: --x
02: -w-
03: -wx
04: r--
05: r-x
06: rw-
07: rwx
```

## Read/Write

Чтение и запись осуществляются с помощью системных вызовов:

```
ssize_t read(int fd, void *buf, size_t count);
ssize_t write(int fd, const void *buf, size_t count);
// count максимальне количесто байт, должно быть меньше размера буффера.
```

Возвращают они количество прочитанных/записанных байт. Это число может быть меньше `count`, поэтому нужно вызывать их в цикле.

## Seek

Курсор двигать
